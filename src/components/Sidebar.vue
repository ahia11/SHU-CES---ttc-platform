<template>
  <nav class="sidebar" :class="{ 'is-collapsed': isCollapsed }">
    <div class="sidebar-header">
      
<router-link to="/" class="sidebar-logo">
        <span class="logo-icon">ğŸ“Š</span>
        <span class="logo-text" v-show="!isCollapsed">æ•°æ®æ´å¯Ÿ</span>
      </router-link>
    </div>

    <ul class="nav-links">
      <li>
        <router-link to="/" class="nav-item">
          <span class="icon">ğŸ </span>
          <span class="link-text">ç½‘ç«™é¦–é¡µ</span>
        </router-link>
      </li>
      
      <li>
        <router-link to="/explorer" class="nav-item">
          <span class="icon">ğŸ“Š</span>
          <span class="link-text">æ•°æ®æ¢ç´¢</span>
        </router-link>
      </li>

      <li>
        <router-link to="/structure" class="nav-item"> <span class="icon">ğŸ“ˆ</span> <span class="link-text">ç»“æ„å˜è¿åˆ†æ</span> </router-link>
      </li>
      
      <li>
        <router-link to="/spatial" class="nav-item">
          <span class="icon">ğŸ—ºï¸</span>
          <span class="link-text">ç©ºé—´æ•ˆåº”åˆ†æ</span>
        </router-link>
      </li>

      <li>
        <router-link to="/causal" class="nav-item">
          <span class="icon">ğŸ”„</span>
          <span class="link-text">åŠ¨æ€å› æœåˆ†æ</span>
        </router-link>
      </li>
    </ul>

    
<button class="toggle-btn" @click="$emit('toggle')" :title="isCollapsed ? 'å±•å¼€ä¾§è¾¹æ ' : 'æ”¶ç¼©ä¾§è¾¹æ '">
      <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="15 18 9 12 15 6"></polyline>
      </svg>
    </button>
  </nav>
</template>
  
<script setup>
import { RouterLink } from 'vue-router'

defineProps({
  isCollapsed: Boolean
})
defineEmits(['toggle'])
</script>
  
<style scoped>
/* ä¾§è¾¹æ æ•´ä½“å¸ƒå±€å’ŒèƒŒæ™¯ */
.sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: var(--sidebar-width);
  height: 100vh;
  background-color: var(--sidebar-bg); 
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  padding: 1.5rem 1rem; /* è°ƒæ•´å†…è¾¹è·ï¼Œå·¦å³ç¨å° */
  transition: width 0.3s ease, padding 0.3s ease;
  overflow-x: hidden; 
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.03);
  z-index: 1000; /* ç¡®ä¿ä¾§è¾¹æ åœ¨æœ€ä¸Šå±‚ */
}

/* ä¾§è¾¹æ å¤´éƒ¨ Logo åŒºåŸŸ */
.sidebar-header {
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 1.5rem;
  text-align: center; /* å±…ä¸­å¯¹é½ */
  transition: padding-bottom 0.3s ease, margin-bottom 0.3s ease;
}

.sidebar-logo {
  display: flex;
  align-items: center;
  justify-content: center; /* é»˜è®¤å±…ä¸­ */
  text-decoration: none;
  color: var(--text-color);
  font-size: 1.5rem;
  font-weight: 700;
  white-space: nowrap;
  transition: all 0.3s ease;
}

.sidebar-logo .logo-icon {
  font-size: 1.8rem;
  margin-right: 0.5rem;
  color: var(--accent-color); /* Logo å›¾æ ‡é¢œè‰² */
  transition: margin-right 0.3s ease;
}

/* æŠ˜å çŠ¶æ€ä¸‹çš„ Logo */
.sidebar.is-collapsed .sidebar-header {
  padding-bottom: 1rem;
  margin-bottom: 1rem;
}
.sidebar.is-collapsed .sidebar-logo .logo-icon {
  margin-right: 0; /* å›¾æ ‡å±…ä¸­ */
}


/* å¯¼èˆªé“¾æ¥å®¹å™¨ */
.nav-links {
  list-style: none;
  flex-grow: 1; /* å æ®å‰©ä½™ç©ºé—´ */
  padding: 0;
  margin-top: 0; /* å¤´éƒ¨æœ‰äº†ï¼Œè¿™é‡Œä¸éœ€è¦é¢å¤–ä¸Šè¾¹è· */
}
  
.nav-links li {
  margin-bottom: 0.5rem; /* å‡å°åˆ—è¡¨é¡¹é—´è· */
}
  
/* å•ä¸ªå¯¼èˆªé“¾æ¥æ ·å¼ */
.nav-item { /* ä» a æ”¹åä¸º nav-itemï¼Œæ›´è¯­ä¹‰åŒ– */
  display: flex;
  align-items: center;
  white-space: nowrap; 
  padding: 0.75rem 0.75rem; /* è°ƒæ•´ padding */
  border-radius: 10px; /* æŸ”å’Œçš„åœ†è§’ */
  color: var(--text-color);
  text-decoration: none;
  font-size: 0.95rem;
  font-weight: 500;
  transition: all 0.2s ease-in-out;
}

.nav-item .icon {
  font-size: 1.25rem; /* è°ƒæ•´å›¾æ ‡å¤§å° */
  margin-right: 0.75rem; /* å›¾æ ‡å’Œæ–‡æœ¬çš„é—´è· */
  flex-shrink: 0;
  width: 1.25rem; /* å›ºå®šå›¾æ ‡å®½åº¦ï¼Œé˜²æ­¢æŠ–åŠ¨ */
  text-align: center;
  color: var(--text-color-light); /* å›¾æ ‡é»˜è®¤é¢œè‰² */
  transition: margin-right 0.3s ease, color 0.2s ease;
}

.nav-item .link-text {
  opacity: 1;
  transition: opacity 0.2s ease;
}

/* é“¾æ¥æ‚¬åœæ•ˆæœ */
.nav-item:hover {
  background-color: rgba(0, 122, 255, 0.08); /* æ›´æ·¡çš„è“è‰²æ‚¬åœ */
  color: var(--text-color); /* æ–‡æœ¬é¢œè‰²ä¸å˜ */
}
.nav-item:hover .icon {
  color: var(--accent-color); /* æ‚¬åœæ—¶å›¾æ ‡å˜äº®è“ */
}
  
/* æ¿€æ´»é“¾æ¥æ ·å¼ */
.nav-item.router-link-active {
  background: var(--accent-color); /* Apple è“ */
  color: #ffffff; /* ç™½è‰²æ–‡æœ¬ */
  font-weight: 600;
  box-shadow: 0 4px 15px -5px rgba(0, 122, 255, 0.4);
}
.nav-item.router-link-active .icon {
  color: #ffffff; /* æ¿€æ´»æ—¶å›¾æ ‡ä¹Ÿå˜ç™½ */
}


/* --- æŠ˜å æŒ‰é’®æ ·å¼ --- */
.toggle-btn {
  position: absolute;
  bottom: 1.5rem; /* è°ƒæ•´åˆ°åº•éƒ¨ */
  left: 50%;
  transform: translateX(-50%); /* æ°´å¹³å±…ä¸­ */
  background: #f0f0f0; 
  border: none;
  color: var(--text-color-light); 
  border-radius: 50%;
  width: 32px; /* ç¨å¤§ä¸€ç‚¹ */
  height: 32px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08); /* å¢åŠ ä¸€ç‚¹é˜´å½± */
}

.toggle-btn:hover {
  background: var(--accent-color);
  color: #ffffff;
  box-shadow: 0 4px 12px rgba(0, 122, 255, 0.3); /* æ‚¬åœæ—¶é˜´å½±æ›´æ˜æ˜¾ */
}

/* SVG å›¾æ ‡æ ·å¼ */
.toggle-icon {
  width: 18px;
  height: 18px;
  transform: rotate(0deg); /* é»˜è®¤ä¸æ—‹è½¬ */
  transition: transform 0.3s ease;
}

/* æŠ˜å çŠ¶æ€ä¸‹çš„æŒ‰é’®å’Œå›¾æ ‡ */
.sidebar.is-collapsed .toggle-btn {
  transform: translateX(-50%) rotate(180deg); /* æŒ‰é’®å±…ä¸­ï¼Œå›¾æ ‡æ—‹è½¬ */
}


/* --- æŠ˜å çŠ¶æ€ä¸‹çš„ä¾§è¾¹æ æ ·å¼ --- */
.sidebar.is-collapsed {
  width: var(--sidebar-width-collapsed);
  padding: 1.5rem 0.5rem; /* æŠ˜å æ—¶å·¦å³å†…è¾¹è·æ›´å° */
}

/* æŠ˜å æ—¶ï¼Œé“¾æ¥æ–‡æœ¬æ¶ˆå¤± */
.sidebar.is-collapsed .nav-item .link-text {
  opacity: 0;
  width: 0; /* å®½åº¦ä¹Ÿè®¾ä¸º0ï¼Œé˜²æ­¢å ç”¨ç©ºé—´ */
  overflow: hidden;
  pointer-events: none;
}

/* æŠ˜å æ—¶ï¼Œå›¾æ ‡å±…ä¸­ */
.sidebar.is-collapsed .nav-item {
  justify-content: center;
  padding: 0.75rem 0.5rem; /* æŠ˜å æ—¶ padding å±…ä¸­ */
}
.sidebar.is-collapsed .nav-item .icon {
  margin-right: 0; 
  font-size: 1.5rem; /* æŠ˜å æ—¶å›¾æ ‡å¯ä»¥æ›´å¤§ä¸€äº› */
  width: auto; /* æ¢å¤è‡ªåŠ¨å®½åº¦ */
  color: var(--text-color); /* æŠ˜å æ—¶å›¾æ ‡é¢œè‰²æ¢å¤ */
}

/* æŠ˜å æ—¶ï¼Œæ¿€æ´»çŠ¶æ€å›¾æ ‡é¢œè‰² */
.sidebar.is-collapsed .nav-item.router-link-active .icon {
  color: #ffffff; /* æ¿€æ´»æ—¶å›¾æ ‡å˜ç™½ */
}
</style>